<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Validate BVN</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header role="banner">
      <div class="bvn">
        <h1>Verify BVN information</h1>
        <label for="bvn-input">Enter customer's BVN</label>
        <input type="text" name="" id="bvn-input" />
        <button type="submit" onclick="bvnValidate()">Verify</button>
      </div>
    </header>

    <script>
      function bvnValidate() {
        const bvnNumber = document.getElementById("bvn-input").value;
        const secretKey = "FLWSECK-e6db11d1f8a6208de8cb2f94e293450e-X";
        const endpoint = `https://ravesandboxapi.flutterwave.com/v2/kyc/bvn/${bvnNumber}?seckey=${secretKey}`;

        fetch(endpoint, { headers: { "Content-Type": "Application/json" } })
          .then(res => {
            return res.json();
          })
          .then(jsonRes => {
            // console.log(jsonRes);
            if (jsonRes["status"] === "success") {
              alert("The BVN number matches");
            } else {
              alert("The BVN number does not match");
            }
          })
          .catch(err => {
            console.log(err);
          });
      }
    </script>
  </body>
</html>
